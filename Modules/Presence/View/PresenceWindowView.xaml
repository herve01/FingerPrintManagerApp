<Window x:Class="FingerPrintManagerApp.Modules.Presence.View.PresenceWindowView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converter="clr-namespace:FingerPrintManagerApp.View.Converter"
        xmlns:interactivity="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:bhv="clr-namespace:FingerPrintManagerApp.ViewModel.Behavior"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        Title="Humager" 
        Name="MainWindow" 
        MinHeight="600" 
        WindowState="Maximized" 
        MinWidth="1200"
        FontFamily="Open Sans"
        Loaded="This_Loaded"
        DataContext="{Binding PresenceWindowViewModel, Source={StaticResource viewModelLocator}}"
        >
    <interactivity:Interaction.Triggers>
        <interactivity:EventTrigger EventName="Loaded">
            <interactivity:InvokeCommandAction Command="{Binding LoadCommand}"/>
        </interactivity:EventTrigger>
    </interactivity:Interaction.Triggers>

    <interactivity:Interaction.Behaviors>
        <bhv:EventToCommandBehavior Command="{Binding ClosingCommand}" Event="Closing" PassArguments="True" />
    </interactivity:Interaction.Behaviors>
    
    <Window.Resources>
        <Storyboard x:Key="SuccessScanAnim">
            <ColorAnimationUsingKeyFrames Storyboard.TargetName="bgBorder"
                                          Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)">
                <EasingColorKeyFrame KeyTime="0:0:1" Value="#B022FF00" />
                <EasingColorKeyFrame KeyTime="0:0:1.5" Value="#10FF00CA" />
                <EasingColorKeyFrame KeyTime="0:0:2" Value="#B022FF00" />
                <EasingColorKeyFrame KeyTime="0:0:2.5" Value="#10FF00CA" />
                <EasingColorKeyFrame KeyTime="0:0:3" Value="#B022FF00" />
                <EasingColorKeyFrame KeyTime="0:0:3.5" Value="#10FF00CA" />
            </ColorAnimationUsingKeyFrames>
        </Storyboard>

        <Storyboard x:Key="FailScanAnim">
            <ColorAnimationUsingKeyFrames Storyboard.TargetName="bgBorder"
                                          Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)">
                <EasingColorKeyFrame KeyTime="0:0:1" Value="#B0FF0000" />
                <EasingColorKeyFrame KeyTime="0:0:1.5" Value="#10FF00CA" />
                <EasingColorKeyFrame KeyTime="0:0:2" Value="#B0FF0000" />
                <EasingColorKeyFrame KeyTime="0:0:2.5" Value="#10FF00CA" />
                <EasingColorKeyFrame KeyTime="0:0:3" Value="#B0FF0000" />
                <EasingColorKeyFrame KeyTime="0:0:3.5" Value="#10FF00CA" />
            </ColorAnimationUsingKeyFrames>
        </Storyboard>
        
        <converter:ByteArrayToImageThumbnailConverter x:Key="thumbnailConverter" />
    </Window.Resources>
    <Grid>
        <Border>
            <Border.Background>
                <ImageBrush ImageSource="/FingerPrintManagerApp;component/View/Image/bg.jpg" />
            </Border.Background>
        </Border>

        <Border>
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#85000000" Offset="0"/>
                    <GradientStop Color="#DC000000" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>

        </Border>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Button Cursor="Hand" 
                    Name="BtnFullScreen" 
                    Width="30"
                    Margin="5"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Click="BtnFullScreen_Click"
                    Background="#20000000"
                    Foreground="#30FFFFFF"
                    Tag="M11.585977,18.999021L12.999977,20.41302 3.4147511,30.000045 9.999999,30.000045 9.999999,32.000045 0,32.000045 0,22.000045 2,22.000045 2,28.586798z M20.414059,18.998996L29.999999,28.586804 29.999999,22.000045 31.999999,22.000045 31.999999,32.000045 21.999999,32.000045 21.999999,30.000045 28.585288,30.000045 18.999996,20.412996z M21.999999,0L31.999999,0 31.999999,9.999999 29.999999,9.999999 29.999999,3.4131746 20.413977,13.001045 18.999977,11.587039 28.585168,2 21.999999,2z M0,0L9.999999,0 9.999999,2 3.4148293,2 13.000021,11.587039 11.586021,13.001045 2,3.4131756 2,9.999999 0,9.999999z"
                    Style="{DynamicResource ButtonFlatIconStyle}" />

            <StackPanel HorizontalAlignment="Right"
                        Margin="20">
                
                <Border BorderThickness="6"
                        CornerRadius="6"
                        BorderBrush="#30FFFFFF"
                        Background="#30000000"
                        Padding="20 10"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top">
                    <TextBlock Text="{Binding CurrentTime, StringFormat={}{0:HH:mm:ss}, FallbackValue='12:30:59'}" 
                               FontSize="80"
                               Width="250"
                               TextAlignment="Center"
                               HorizontalAlignment="Center"
                               RenderTransformOrigin="0.5 0.5"
                               VerticalAlignment="Center" 
                               Foreground="#DDFFFFFF"
                               TextBlock.FontFamily="Digital-7"/>
                </Border>

                <Border Height="2" />
                
                <TextBlock Text="{Binding CurrentTime, ConverterCulture='fr-FR', StringFormat={}{0:ddd dd MMM yyyy}, FallbackValue='Lun 03 Mai 2021'}"
                           TextAlignment="Center"
                           FontSize="32"
                           Foreground="#fff"
                           Typography.Capitals="AllSmallCaps"
                           FontWeight="Light"
                           FontFamily="Segoe UI"
                           />
            </StackPanel>

            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Margin="20"
                        Grid.RowSpan="3">
                <Border Grid.Row="2"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Center"
                        Padding="40 5"
                        CornerRadius="10"
                        BorderThickness="3">
                    <Border.BorderBrush>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#DDE800B8" Offset="0"/>
                            <GradientStop Color="#DD1A0000" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.BorderBrush>
                    <Border.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#20FF00CA" Offset="0"/>
                            <GradientStop Color="#70FF00CA" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <TextBlock Text="PLACEZ VOTRE DOIGT SUR LE SCANNEUR"
                               FontSize="20"
                               VerticalAlignment="Center"
                               Foreground="#70FFFFFF"
                               FontFamily="Segoe UI"
                               FontWeight="Normal"
                               Typography.Capitals="AllSmallCaps"/>
                </Border>
                <!--10FF00CA B022FF00 B0FF0000 -->
                <Grid Margin="20">
                    <Border BorderThickness="3"
                            Width="280"
                            Height="360"
                            BorderBrush="#30FFFFFF"
                            Background="#10FF00CA"
                            CornerRadius="28"
                            Name="bgBorder"
                        />

                    <Grid Width="280"
                          Height="360">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="35" />
                            <ColumnDefinition />
                            <ColumnDefinition Width="35" />
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="45" />
                            <RowDefinition />
                            <RowDefinition Height="45" />
                        </Grid.RowDefinitions>

                        <!--<Path Height="30"
                          Width="30"
                          Stretch="Uniform"
                          Grid.Column="0"
                          Grid.Row="1"
                          Margin="0 0 -2 0"
                          Fill="#BBFFFFFF"
                          HorizontalAlignment="Right"
                          Data="M16.008,0L16.008,32 0,15.998001z" 
                          >
                    </Path>

                    <Path Height="30"
                          Width="30"
                          Stretch="Uniform"
                          Grid.Column="1"
                          Grid.Row="0"
                          Margin="0 0 0 -2"
                          Fill="#BBFFFFFF"
                          VerticalAlignment="Bottom"
                          HorizontalAlignment="Center"
                          Data="M12.797962,0L25.598,12.8 0,12.8z" 
                          >
                    </Path>

                    <Path Height="30"
                          Width="30"
                          Stretch="Uniform"
                          Grid.Column="2"
                          Grid.Row="1"
                          Margin="-2 0 0 0"
                          Fill="#BBFFFFFF"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Left"
                          Data="M0,0L16.005,15.999001 0,32z" 
                          >
                    </Path>

                    <Path Height="30"
                          Width="30"
                          Stretch="Uniform"
                          Grid.Column="1"
                          Grid.Row="2"
                          Margin="0 -2 0 0"
                          Fill="#BBFFFFFF"
                          VerticalAlignment="Top"
                          HorizontalAlignment="Center"
                          Data="M0,0L25.600001,0 12.80003,12.798001z" 
                          >
                    </Path>-->

                        <Border Width="210"
                                Height="270"
                                Grid.Column="1"
                                Grid.Row="1"
                                BorderThickness="3"
                                BorderBrush="#50FFFFFF"
                                Background="#D0000000"
                        >
                            <Grid>
                                <Path Width="160"
                                      Height="225"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"
                                      Fill="#22FF00CA"
                                      Stroke="#FF00CA"
                                      StrokeThickness="1"
                                      Stretch="Uniform"
                                      Data="M10.215236,10.215975C9.8152689,11.215976 8.5162471,12.913976 8.5162471,12.913976 7.2172245,14.41297 7.3172616,16.810982 7.3172616,16.810982L6.8172573,17.11097 5.7182487,15.212989 5.2182444,15.411964C4.7192167,16.111977 5.318221,18.309977 5.318221,18.309977 5.2182444,19.109965 6.6172436,19.309977 6.6172436,19.309977 9.8152689,29.201985 15.111275,27.802998 15.111275,27.802998 20.107352,26.803973 22.006354,19.209971 22.006354,19.209971 23.105362,19.109965 23.205401,18.609965 23.205401,18.609965L23.605368,16.011971C23.605368,15.51197 23.205401,15.411964 23.205401,15.411964 23.205401,15.611976 22.605358,16.611977 22.605358,16.611977 20.707331,14.41297 20.707331,12.114964 20.707331,12.114964L19.80736,11.315982C15.111275,14.212988,10.215236,10.215975,10.215236,10.215975z M15.282637,2.3815066E-05C22.090826,-0.014931699 24.904391,7.0189808 24.904391,7.0189808 25.403418,7.5179742 27.102408,14.512976 27.102408,14.512976 27.502434,16.511971 28.40143,18.010966 28.40143,18.010966 28.601443,18.309977 28.801396,18.909983 28.801396,18.909983 29.500439,21.107983 27.602412,21.907973 27.602412,21.907973L24.204371,31.999993 20.207327,31.700005 19.40831,31.499993 19.40831,27.003985C17.109339,29.101979 15.011299,29.201985 14.511294,29.201985 14.012267,29.201985 11.813273,29.101979 9.6152557,27.003985L9.6152557,31.599999 8.8162368,31.79998 5.4181975,31.999993 1.3211769,21.907973C1.3211769,21.907973 -0.47681243,21.007977 0.12219162,18.909983 0.12219181,18.909983 0.32214474,18.309977 0.52215873,18.010966 0.52215867,18.010966 1.3211769,16.411965 1.821181,14.512976 1.8211812,14.512976 3.6202081,7.5179742 4.0191983,7.0189808 4.1192359,7.0189808 6.8172573,-0.076027077 13.712276,0.023948637L14.411317,0.023948637 14.511294,0.023948637 14.61127,0.023948637C14.839242,0.0083235885,15.063018,0.00050622325,15.282637,2.3815066E-05z"
                              />

                                <Image Source="{Binding Path=Employe.Photo, IsAsync=True, Converter={StaticResource thumbnailConverter}, ConverterParameter='350,450'}">
                                    <Image.Clip>
                                        <RectangleGeometry Rect="0 0 210 270" 
                                                   RadiusX="0" 
                                                   RadiusY="0"  
                                                   />
                                    </Image.Clip>
                                </Image>
                            </Grid>
                        </Border>
                    </Grid>

                </Grid>

                <StackPanel>
                    <Border CornerRadius="10"
                            Width="800"
                            Background="#40000000"
                            BorderThickness="4"
                            Padding="10"
                        >
                        <Border.BorderBrush>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="Black" Offset="0"/>
                                <GradientStop Color="#BBFFFFFF" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.BorderBrush>
                        <StackPanel TextBlock.Foreground="#fff"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                            <TextBlock Text="{Binding Salutation, FallbackValue='Salut,'}"
                                       HorizontalAlignment="Center"
                                       FontSize="24"
                                   />

                            <Border Height="3" />
                            <TextBlock Text="{Binding Message, FallbackValue='Utilisez le scanneur pour vous identifier !'}"
                                       HorizontalAlignment="Center"
                                       FontSize="36"
                                       FontWeight="ExtraBold"
                                       TextWrapping="WrapWithOverflow"
                                       TextAlignment="Center"
                                   />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </StackPanel>
        </Grid>

        <TextBlock Name="txtStatus"
                   Visibility="Collapsed"
                   Text="{Binding ScanStatus}"
                   />
    </Grid>
</Window>
